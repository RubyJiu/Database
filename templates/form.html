<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ 'Tambah Buku' if mode == 'create' else 'Edit Buku' }}</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --rich-black: #001524ff;
      --caribbean-current: #15616dff;
      --papaya-whip: #ffecd1ff;
      --orange-wheel: #ff7d00ff;
      --sienna: #78290fff;
      --paynes-gray: #2f4858;
      --bg: var(--caribbean-current);
      --panel: var(--papaya-whip);
      --text: var(--rich-black);
      --accent: var(--sienna);
      --accent-strong: var(--orange-wheel);
      --line: #78290fff33;
      --muted: #78290fff66;
    }
    * { box-sizing: border-box; }
    body { margin: 0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: radial-gradient(1200px 600px at 70% -10%, rgba(94,100,114,0.08), transparent), var(--bg); color: var(--text); }
    .container { max-width: 800px; margin: 40px auto; padding: 0 16px; }
    .card { background: var(--panel); border: 1px solid var(--line); border-radius: 14px; box-shadow: 0 10px 30px rgba(0,0,0,0.08), inset 0 1px 0 rgba(255,255,255,0.35); overflow: hidden; }
    .header { padding: 18px 20px; border-bottom: 1px solid var(--line); display: flex; align-items: center; gap: 10px; }
    .dot { width: 10px; height: 10px; border-radius: 50%; background: var(--accent); box-shadow: 0 0 10px rgba(174,217,224,0.55); }
    .title { font-weight: 600; letter-spacing: 0.2px; }
    .content { padding: 20px; }
    .field { display: flex; flex-direction: column; gap: 6px; margin-bottom: 12px; }
    input[type="text"], input[type="number"], select, textarea {
      background: #fffbe6; border: 1px solid var(--line); color: var(--text); padding: 10px 12px; border-radius: 8px; width: 100%;
    }
    textarea { min-height: 100px; }
    .actions { display: flex; gap: 10px; justify-content: flex-end; margin-top: 10px; }
    button, .btn { background: var(--accent); border: 1px solid var(--paynes-gray); color: #ffffff; padding: 10px 16px; border-radius: 8px; cursor: pointer; text-decoration: none; display: inline-flex; align-items: center; }
    button:hover, .btn:hover { background: var(--paynes-gray); }
    .error { background: rgba(255,166,158,0.22); border: 1px solid var(--accent-strong); color: var(--paynes-gray); padding: 10px 12px; border-radius: 10px; margin-bottom: 16px; }
  </style>
</head>
<body>
  <div class="container">
    <div class="card">
      <div class="header">
        <div class="dot"></div>
        <div class="title">{{ 'Tambah Buku' if mode == 'create' else 'Edit Buku' }}</div>
      </div>
      <div class="content">
        {% if error %}
          <div class="error">{{ error }}</div>
        {% endif %}

        <form method="post" action="{{ url_for('create_book') if mode == 'create' else url_for('edit_book', book_id=book.id if book else 0) }}">
          <div class="field">
            <label for="name">Nama</label>
            <input type="text" id="name" name="name" required value="{{ book.name if book else '' }}" />
          </div>
          <div class="field">
            <label for="author">Author</label>
            <input type="text" id="author" name="author" required value="{{ book.author if book else '' }}" />
          </div>
          <div class="field">
            <label for="price">Harga</label>
            <input type="number" id="price" name="price" step="0.01" required value="{{ '%.2f'|format(book.price) if book and book.price is not none else '' }}" />
          </div>
          <div class="field">
            <label for="category_id">Kategori</label>
            <select id="category_id" name="category_id" required>
              <option value="">Pilih Kategori</option>
              {% for c in categories %}
                <option value="{{ c.id }}" {% if book and (book.category_id|string == c.id|string) %}selected{% endif %}>{{ c.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="field">
            <label for="publisher_id">Publisher (opsional)</label>
            <select id="publisher_id" name="publisher_id">
              <option value="">None</option>
              {% for p in publishers %}
                <option value="{{ p.id }}" {% if book and (book.publisher_id|string == p.id|string) %}selected{% endif %}>{{ p.name }}</option>
              {% endfor %}
            </select>
          </div>
          <div class="field">
            <label for="description">Deskripsi</label>
            <textarea id="description" name="description" placeholder="Opsional">{{ book.description if book else '' }}</textarea>
          </div>
          <div class="actions">
            <a class="btn" href="{{ url_for('index') }}">Batal</a>
            <button type="submit">Simpan</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</body>
</html>
